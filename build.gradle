plugins {
    id "org.jetbrains.kotlin.jvm" version '1.2.31'
    id "com.jfrog.bintray" version "1.7.3"
}

group 'me.piruin'
version = {->
    def stdout = new ByteArrayOutputStream()
    exec {
        commandLine 'git', 'describe', '--tags'
        standardOutput = stdout
    }
    String tag = stdout.toString().trim();
    if (tag.length() == 0)
        tag = "0.0.0"
    println "version $tag"
    return tag
}.call()

allprojects {
    repositories {
        mavenCentral()
        jcenter()
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.5.1'
    distributionUrl = distributionUrl.replace("bin", "all")
}
