plugins {
    id "org.jetbrains.kotlin.jvm" version "1.5.10"
}

group 'me.piruin'
version = {->
    def stdout = new ByteArrayOutputStream()
    exec {
        commandLine 'git', 'describe', '--tags'
        standardOutput = stdout
    }
    String tag = stdout.toString().trim();
    if (tag.length() == 0)
        tag = "0.0.0"
    println "version $tag"
    return tag
}.call()

allprojects {
    repositories {
        mavenCentral()
        maven { url 'https://jitpack.io' }
    }
}
